{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a288da2e_278bfb5c",
        "filename": "src/main/java/com/googlesource/gerrit/modules/cache/chroniclemap/ChronicleMapCacheConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-14T06:52:56Z",
      "side": 1,
      "message": "I have been thinking about it.\nDo you think issuing a metric would give better visibility?\n\nAlso, if this is noticeable by running `./bin/gerrit.sh run` only, I fear it could really still go unnoticed.\n\nThoughts?",
      "range": {
        "startLine": 255,
        "startChar": 1,
        "endLine": 257,
        "endChar": 44
      },
      "revId": "e36a09359a7e6718466d349cef2613d096ac19c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "405345f8_630cfab1",
        "filename": "src/main/java/com/googlesource/gerrit/modules/cache/chroniclemap/ChronicleMapCacheConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-15T06:21:58Z",
      "side": 1,
      "message": "Metric would work (I have just confirmed that). I was thinking about single metric for all caches e.g. `cache/chroniclemap/caches_without_dedicated_chroniclemap_configuration` and it would show the cumulative number of caches that miss the dedicated config. We would still keep the log entries and describe how to check it in `tuning.md` as it is now. WDYT?",
      "parentUuid": "a288da2e_278bfb5c",
      "range": {
        "startLine": 255,
        "startChar": 1,
        "endLine": 257,
        "endChar": 44
      },
      "revId": "e36a09359a7e6718466d349cef2613d096ac19c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a50a25c_b531ff24",
        "filename": "src/main/java/com/googlesource/gerrit/modules/cache/chroniclemap/ChronicleMapCacheConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-15T07:13:48Z",
      "side": 1,
      "message": "Yep this would already be an improvement I think.\nPersonally, since we are already exposing the metric I would consider suffixing them with the _cache_name_ (since labels are not an option here).\n\nWe should be fine because the number of caches is bounded so we are not risking an explosion of metrics here.\n\nHaving said that, I think the current implementation also does the trick (and arguably it is slightly easier to setup a grafana dashboard).\n\nIf you want to explore this option that\u0027d be cool, otherwise I am happy to +2 this already.",
      "parentUuid": "405345f8_630cfab1",
      "range": {
        "startLine": 255,
        "startChar": 1,
        "endLine": 257,
        "endChar": 44
      },
      "revId": "e36a09359a7e6718466d349cef2613d096ac19c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33dab392_ac17161e",
        "filename": "src/main/java/com/googlesource/gerrit/modules/cache/chroniclemap/ChronicleMapCacheConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-15T08:16:43Z",
      "side": 1,
      "message": "Do you mean that we would create the cache postfixed metric only for those that miss the config or for all?\nHow about having one that collects all so that it could be easily tracked with alarm etc and having those offending ones post-fixed with a cache name?",
      "parentUuid": "1a50a25c_b531ff24",
      "range": {
        "startLine": 255,
        "startChar": 1,
        "endLine": 257,
        "endChar": 44
      },
      "revId": "e36a09359a7e6718466d349cef2613d096ac19c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecc71581_a6cd9b5b",
        "filename": "src/main/java/com/googlesource/gerrit/modules/cache/chroniclemap/ChronicleMapCacheConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-19T12:34:36Z",
      "side": 1,
      "message": "I did both. Let me hear what is your opinion about it ðŸ˜„",
      "parentUuid": "33dab392_ac17161e",
      "range": {
        "startLine": 255,
        "startChar": 1,
        "endLine": 257,
        "endChar": 44
      },
      "revId": "e36a09359a7e6718466d349cef2613d096ac19c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7cc95001_daf67767",
        "filename": "src/main/java/com/googlesource/gerrit/modules/cache/chroniclemap/ChronicleMapCacheConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-20T07:52:22Z",
      "side": 1,
      "message": "See above my comment.",
      "parentUuid": "ecc71581_a6cd9b5b",
      "range": {
        "startLine": 255,
        "startChar": 1,
        "endLine": 257,
        "endChar": 44
      },
      "revId": "e36a09359a7e6718466d349cef2613d096ac19c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}